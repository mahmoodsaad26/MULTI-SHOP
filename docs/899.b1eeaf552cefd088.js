"use strict";(self.webpackChunkmulti_shop=self.webpackChunkmulti_shop||[]).push([[899],{3899:(f,d,c)=>{c.r(d),c.d(d,{AllordersComponent:()=>C});var p=c(6814);class i extends Error{}i.prototype.name="InvalidTokenError";var t=c(4769),o=c(6286);function l(r,s){if(1&r&&(t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"img",9),t.qZA(),t.TgZ(3,"div",10)(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p",5),t._uU(7),t.qZA()()()),2&r){const e=s.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(3),t.Oqu(e.product.title),t.xp6(2),t.Oqu(e.product.category.name)}}function v(r,s){if(1&r&&(t.TgZ(0,"div",3)(1,"div",4)(2,"p"),t._uU(3,"Total price: "),t.TgZ(4,"span",5),t._uU(5),t.qZA()(),t.TgZ(6,"p"),t._uU(7,"Created at:"),t.TgZ(8,"span",5),t._uU(9),t.qZA()()(),t.YNc(10,l,8,4,"div",6),t.qZA()),2&r){const e=s.$implicit;t.xp6(5),t.Oqu(e.totalOrderPrice),t.xp6(4),t.Oqu(e.createdAt.split("T",1).join()),t.xp6(1),t.Q6J("ngForOf",e.cartItems)}}let C=(()=>{class r{constructor(e){this._CartService=e,this.allOrders=[]}ngOnInit(){if(null!=localStorage.getItem("etoken")){const n=function a(r,s){if("string"!=typeof r)throw new i("Invalid token specified: must be a string");s||(s={});const e=!0===s.header?0:1,n=r.split(".")[e];if("string"!=typeof n)throw new i(`Invalid token specified: missing part #${e+1}`);let m;try{m=function h(r){let s=r.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function u(r){return decodeURIComponent(atob(r).replace(/(.)/g,(s,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(s)}catch{return atob(s)}}(n)}catch(g){throw new i(`Invalid token specified: invalid base64 for part #${e+1} (${g.message})`)}try{return JSON.parse(m)}catch(g){throw new i(`Invalid token specified: invalid json for part #${e+1} (${g.message})`)}}(localStorage.getItem("etoken"));this.userInfo=n}this._CartService.getAllOrders(this.userInfo.id).subscribe({next:e=>{this.allOrders=e.reverse(),console.log(this.allOrders)}})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(o.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-allorders"]],standalone:!0,features:[t.jDz],decls:4,vars:1,consts:[[1,"w-75","mx-auto","mt-5","shadow","rounded","p-3"],[1,"h3"],["class","mb-3 border-bottom",4,"ngFor","ngForOf"],[1,"mb-3","border-bottom"],[1,"d-flex","align-items-center","justify-content-between"],[1,"category-color"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"row","mb-2"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10"]],template:function(n,m){1&n&&(t.TgZ(0,"section",0)(1,"h2",1),t._uU(2,"All Orders"),t.qZA(),t.YNc(3,v,11,3,"div",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngForOf",m.allOrders))},dependencies:[p.ez,p.sg]})}return r})()},6286:(f,d,c)=>{c.d(d,{N:()=>h});var p=c(5619),i=c(4769),u=c(9862);let h=(()=>{class a{constructor(o){this._HttpClient=o,this.cartItemsCount=new p.X(0),this.myToken={token:localStorage.getItem("etoken")}}addToCart(o){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:o})}getCartItems(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeCartItem(o){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${o}`)}updateCartCoun(o,l){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${o}`,{count:l})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart")}checkout(o,l){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${o}?url=https://mahmoodsaad26.github.io/MULTI-SHOP`,{shippingAddress:l})}getAllOrders(o){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${o}`)}static#t=this.\u0275fac=function(l){return new(l||a)(i.LFG(u.eN))};static#e=this.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);