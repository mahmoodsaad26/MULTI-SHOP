"use strict";(self.webpackChunkmulti_shop=self.webpackChunkmulti_shop||[]).push([[953],{7953:(p,m,o)=>{o.r(m),o.d(m,{WishListComponent:()=>O});var a=o(6814),h=o(1409),d=o(1120),t=o(4769),n=o(8806),g=o(2425),e=o(6286);function _(r,u){if(1&r){const s=t.EpF();t.TgZ(0,"i",17),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.removeProduct(c._id))}),t.qZA()}}const v=function(r){return{"rating-color":r}};function C(r,u){if(1&r&&t._UZ(0,"i",18),2&r){const s=u.$implicit,i=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,v,s<=i.ratingsAverage))}}const f=function(r){return["/product-details",r]},T=function(){return[1,2,3,4,5]};function E(r,u){if(1&r){const s=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,_,1,0,"i",7),t.TgZ(3,"div",8),t._UZ(4,"img",9),t.TgZ(5,"h3",10),t._uU(6),t.ALo(7,"cutText"),t.qZA(),t.TgZ(8,"h4",11),t._uU(9),t.qZA(),t.TgZ(10,"div",12)(11,"span"),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.YNc(16,C,1,3,"i",13),t.qZA()(),t.TgZ(17,"div",14)(18,"button",15,16),t.NdJ("click",function(){const l=t.CHM(s).$implicit,I=t.MAs(19),L=t.oxw(2);return t.KtG(L.addProductToCart(l._id,I))}),t._uU(20,"+Add to cart"),t.qZA()()()()()}if(2&r){const s=u.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.wishlistData.includes(s._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(15,f,s._id)),t.xp6(1),t.Q6J("src",s.imageCover,t.LSH)("alt",s.category.name),t.xp6(2),t.Oqu(t.xi3(7,9,s.title,3)),t.xp6(3),t.Oqu(s.category.name),t.xp6(3),t.Oqu(t.xi3(13,12,s.price,"EGP ")),t.xp6(3),t.hij("",s.ratingsAverage," "),t.xp6(1),t.Q6J("ngForOf",t.DdM(17,T))}}function x(r,u){if(1&r&&(t.TgZ(0,"section",2)(1,"div",3),t.YNc(2,E,21,18,"div",4),t.qZA()()),2&r){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.wishlistItems)}}function W(r,u){1&r&&(t.TgZ(0,"h1",19),t._uU(1," Your Wishlist is empty!"),t.qZA())}let O=(()=>{class r{constructor(s,i,c,l){this._WishListService=s,this._ToastrService=i,this._CartService=c,this._Renderer2=l,this.wishlistItems=[],this.wishlistData=[]}ngOnInit(){this._WishListService.getWishlist().subscribe({next:s=>{this.wishlistItems=s.data;const i=s.data.map(c=>c._id);this.wishlistData=i,this._WishListService.count.next(s.count),console.log(this.wishlistItems)}})}addProductToWishlist(s){this._WishListService.addToWishlist(s).subscribe({next:i=>{this.wishlistData=i.data,this._ToastrService.success(i.message),this._WishListService.count.next(i.data.length),console.log(i)},error:i=>{this._ToastrService.error("error")}})}removeProduct(s){this._WishListService.removeFromWishlist(s).subscribe({next:i=>{this.wishlistData=i.data,console.log(i);const c=this.wishlistItems.filter(l=>this.wishlistData.includes(l._id));this.wishlistItems=c,this._WishListService.count.next(i.data.length)}})}addProductToCart(s,i){this._Renderer2.setAttribute(i,"disabled","true"),this._CartService.addToCart(s).subscribe({next:c=>{this._Renderer2.removeAttribute(i,"disabled"),this._ToastrService.success(c.message),this._CartService.cartItemsCount.next(c.numOfCartItems),console.log(c)},error:c=>{this._Renderer2.removeAttribute(i,"disabled")}})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(n.i),t.Y36(g._W),t.Y36(e.N),t.Y36(t.Qsj))};static#s=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-3",4,"ngIf","ngIfElse"],["empty",""],[1,"my-3"],[1,"row"],["class","col-md-3 col-lg-2",4,"ngFor","ngForOf"],[1,"col-md-3","col-lg-2"],[1,"product"],["class","fa-solid fa-heart text-danger heart ",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"h6"],[1,"h6","category-color"],[1,"d-flex","justify-content-between"],["class","fas fa-star",3,"ngClass",4,"ngFor","ngForOf"],[1,"m-1"],[1,"main-btn","w-100",3,"click"],["addBtn",""],[1,"fa-solid","fa-heart","text-danger","heart",3,"click"],[1,"fas","fa-star",3,"ngClass"],[1,"text-center","m-5"]],template:function(i,c){if(1&i&&(t.YNc(0,x,3,1,"section",0),t.YNc(1,W,2,0,"ng-template",null,1,t.W1O)),2&i){const l=t.MAs(2);t.Q6J("ngIf",c.wishlistItems.length>0)("ngIfElse",l)}},dependencies:[a.ez,a.mk,a.sg,a.O5,a.H9,h.Q,d.rH]})}return r})()},6286:(p,m,o)=>{o.d(m,{N:()=>t});var a=o(5619),h=o(4769),d=o(9862);let t=(()=>{class n{constructor(e){this._HttpClient=e,this.cartItemsCount=new a.X(0),this.myToken={token:localStorage.getItem("etoken")}}addToCart(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:e})}getCartItems(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/cart")}removeCartItem(e){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/cart/${e}`)}updateCartCoun(e,_){return this._HttpClient.put(`https://ecommerce.routemisr.com/api/v1/cart/${e}`,{count:_})}clearCart(){return this._HttpClient.delete("https://ecommerce.routemisr.com/api/v1/cart")}checkout(e,_){return this._HttpClient.post(`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${e}?url=https://mahmoodsaad26.github.io/MULTI-SHOP`,{shippingAddress:_})}getAllOrders(e){return this._HttpClient.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${e}`)}static#t=this.\u0275fac=function(_){return new(_||n)(h.LFG(d.eN))};static#s=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},8806:(p,m,o)=>{o.d(m,{i:()=>t});var a=o(5619),h=o(4769),d=o(9862);let t=(()=>{class n{constructor(e){this._HttpClient=e,this.count=new a.X(0)}addToWishlist(e){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/wishlist",{productId:e})}getWishlist(){return this._HttpClient.get("https://ecommerce.routemisr.com/api/v1/wishlist")}removeFromWishlist(e){return this._HttpClient.delete(`https://ecommerce.routemisr.com/api/v1/wishlist/${e}`)}static#t=this.\u0275fac=function(_){return new(_||n)(h.LFG(d.eN))};static#s=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()}}]);